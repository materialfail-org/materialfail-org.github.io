<!DOCTYPE html>
<html>
  <head>
    {% include head.html %}
    {% include meta.html %}
  </head>
  <body>
    <div class="backround-image">
      <div class="content-container">

        {% assign isHome = page.title | slugify | replace:'-','' %}

        <div class="info-container">
          <div class="info-container-left {{ isHome }}">
            {% include info-column.html %}
          </div>
          <div class="info-container-right {{ isHome }}">
            {% include info-column.html %}
          </div>

        </div>

        <div class="list-container">
          <div class="list-background-container">
            <div class="list-background" id="the-background-image"></div>
          </div>

          <div class="list-content-container">
            <div class="list-content">
              <div class="list-content-align">
                {% if page.title == "material.fail" %}
                  {% assign publishers = site.pages | where_exp:"page","page.unlist != true" %}

                  {% capture pubsmegazord %}
                    {% for pub in publishers %}
                      ‡{{pub.title | slugify:"latin"}}√{{pub.url}}√{{pub.title}}
                    {% endfor %}
                  {% endcapture %}

                  {% assign pubsobjslist = pubsmegazord | split:"‡" | sort %}

                  {% assign lastLetter = "" %}
                  <ul>
                  {% for pubobj in pubsobjslist %}
                    {% assign pubdata = pubobj | split:"√" %}
                    {% if pubdata[2] %}
                      {% assign thisLetter = pubdata[2] | slice: 0 %}
                      {% if thisLetter != lastLetter %}
                        {% assign lastLetter = thisLetter %}
                        {% assign thisClass = "list-item-index" %}
                      {% else %}
                        {% assign thisClass = "list-item-index list-item-index-hidden" %}
                      {% endif %}
                      <li>
                        <div class="{{ thisClass }}">{{ thisLetter }}</div>
                        <a href="{{ site.baseurl }}{{ pubdata[1] }}">{{ pubdata[2] }}</a>
                      </li>
                    {% endif %}
                  {% endfor %}
                  </ul>

                {% elsif page.title == "404" %}
                  <div class="_404-text">404<br>404<br>404<br>404</div>

                {% elsif page.books %}
                  {% capture booksmegazord %}
                    {% for book in page.books %}
                      ‡{{book.title | slugify:"latin"}}√{{book.link}}√{{book.title}}
                    {% endfor %}
                  {% endcapture %}

                  {% assign booksobjslist = booksmegazord | split:"‡" | sort %}

                  {% assign lastLetter = "" %}
                  <ul>
                  {% for bookobj in booksobjslist %}
                    {% assign bookdata = bookobj | split:"√" %}
                    {% if bookdata[2] %}
                      {% assign thisLetter = bookdata[2] | slice: 0 %}
                      {% if thisLetter != lastLetter %}
                        {% assign lastLetter = thisLetter %}
                        {% assign thisClass = "list-item-index" %}
                      {% else %}
                        {% assign thisClass = "list-item-index list-item-index-hidden" %}
                      {% endif %}
                      <li>
                        <div class="{{ thisClass }}">{{ thisLetter }}</div>
                        <a href="{{ bookdata[1] }}" target="_blank">{{ bookdata[2] }}</a>
                      </li>
                    {% endif %}
                  {% endfor %}
                  </ul>
                {% endif %}
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </body>
</html>
